<h1>Horses</h1>

<style>
  .card.custom-card {
    border-radius: 10px;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    overflow: hidden;
  }

  .card.custom-card:hover {
    transform: scale(1.02);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  }
  .eye-icon {
    position: absolute;
    top: 10px;
    right: 10px;
    background: rgba(0, 0, 0, 0.6);
    color: white;
    padding: 5px;
    border-radius: 50%;
    cursor: pointer;
  }
</style>

<div class="container my-4">
  <div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4 p-3">
    <% @horses.each do |horse| %>
      <div class="col">
        <div class="card custom-card h-100 p-3 position-relative" style="cursor: pointer; background-color: #ebcab5;">
          <a href="<%= horse_path(horse) %>" style="text-decoration: none; color: inherit;">
            <% if horse.pictures.attached? %>
              <%= cl_image_tag horse.pictures.first.key, class: "card-img-top img-fluid border rounded mb-3" %>
            <% else %>
              <%= image_tag "backup-image.png", alt: "No Image", class: "card-img-top img-fluid border rounded mb-3" %>
            <% end %>

            <div class="card-body">
              <h5 class="card-title"><%= horse.name %></h5>
              <p class="card-text">
                <strong>Location:</strong> <%= horse.location %><br>
                <strong>Stud Fee:</strong> <%= number_to_currency(horse.stud_fee) %>
              </p>
            </div>
          </a>

          <i class="fa fa-eye eye-icon" data-bs-toggle="modal" data-bs-target="#horseModal-<%= horse.id %>"></i>
        </div>

        <div class="modal fade" id="horseModal-<%= horse.id %>" tabindex="-1" aria-labelledby="horseModalLabel-<%= horse.id %>" aria-hidden="true">
          <div class="modal-dialog modal-lg">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="horseModalLabel-<%= horse.id %>"><%= horse.name %></h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <% if horse.pictures.attached? %>
                  <%= cl_image_tag horse.pictures.first.key %>
                <% else %>
                  <%= image_tag "backup-image.png", alt: "No Image", class: "img-fluid mb-3" %>
                <% end %>
                <p>
                  <strong>Breed:</strong> <%= horse.breed %><br>
                  <strong>Age:</strong> <%= horse.age %><br>
                  <strong>Location:</strong> <%= horse.location %><br>
                  <strong>Stud Fee:</strong> <%= number_to_currency(horse.stud_fee) %><br>
                  <strong>Pedigree:</strong> <%= horse.pedigree %><br>
                  <strong>Progeny Success:</strong> <%= horse.progeny_success %><br>
                  <strong>Race Record:</strong> <%= horse.race_record %>
                </p>
              </div>
              <div class="modal-footer">
                <%= link_to "Book", horse_path(horse), class: "btn btn-primary" %>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                  <i class="fa fa-times"></i>
                  Close
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>
